function initMobileMenu(){const e=document.getElementById("menu-toggle"),t=document.getElementById("mobile-menu"),r=document.getElementById("menu-overlay"),n=document.getElementById("menu-close");if(!e||!t)return;const o=e=>{if("Tab"!==e.key)return;const r=t.querySelectorAll("a[href], button:not([disabled])");if(!r.length)return;const n=r[0],o=r[r.length-1];e.shiftKey&&document.activeElement===n?(e.preventDefault(),o.focus()):e.shiftKey||document.activeElement!==o||(e.preventDefault(),n.focus())},a=()=>{t.classList.replace("translate-x-0","translate-x-full"),r?.classList.add("hidden"),document.body.style.overflow="",t.removeEventListener("keydown",o),e.focus()};e.addEventListener("click",()=>{t.classList.replace("translate-x-full","translate-x-0"),r?.classList.remove("hidden"),document.body.style.overflow="hidden",n?.focus(),t.addEventListener("keydown",o)}),n?.addEventListener("click",a),r?.addEventListener("click",a),document.addEventListener("keydown",e=>{"Escape"!==e.key||t.classList.contains("translate-x-full")||a()}),t.querySelectorAll("a").forEach(e=>e.addEventListener("click",a))}function initScrollReveal(){const e=document.querySelectorAll(".reveal");if(!e.length)return;const t=new IntersectionObserver(e=>e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),t.unobserve(e.target))}),{threshold:.12,rootMargin:"0px 0px -30px 0px"});e.forEach(e=>t.observe(e))}function initNavbarScroll(){const e=document.getElementById("navbar");if(!e)return;const t=e.hasAttribute("data-navbar-dark"),r=()=>{window.scrollY>60?(e.classList.add("bg-white/95","backdrop-blur-md","shadow-sm"),t&&e.classList.remove("navbar-dark")):(e.classList.remove("bg-white/95","backdrop-blur-md","shadow-sm"),t&&e.classList.add("navbar-dark"))};window.addEventListener("scroll",r,{passive:!0}),r()}function initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{const r=document.querySelector(e.getAttribute("href"));if(!r)return;t.preventDefault();const n=document.getElementById("navbar")?.offsetHeight||0;window.scrollTo({top:r.getBoundingClientRect().top+window.scrollY-n-20,behavior:"smooth"})})})}function initServiceTabs(){const e=document.querySelectorAll("[data-service-tab]"),t=document.querySelectorAll("[data-service-panel]");if(!e.length)return;let r=null;function n(n){e.forEach(e=>{e.classList.remove("bg-graphite-800","text-white"),e.classList.add("text-graphite-500","hover:text-graphite-800","hover:bg-graphite-50"),e.setAttribute("aria-selected","false")});const o=document.querySelector(`[data-service-tab="${n}"]`);o&&(o.classList.add("bg-graphite-800","text-white"),o.classList.remove("text-graphite-500","hover:text-graphite-800","hover:bg-graphite-50"),o.setAttribute("aria-selected","true")),t.forEach(e=>{var t;e.classList.add("hidden"),e.dataset.servicePanel===n&&(e.classList.remove("hidden"),(t=e).style.opacity="0",t.style.transform="translateY(10px)",requestAnimationFrame(()=>{t.style.transition="opacity 0.4s ease, transform 0.4s ease",t.style.opacity="1",t.style.transform="translateY(0)"}))}),r=n}e.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.serviceTab;r!==t&&n(t)})}),n("etes")}function initTeamTabs(){const e=document.querySelectorAll("[data-team-tab]"),t=document.querySelectorAll("[data-team-panel]");e.length&&e.forEach(r=>{r.addEventListener("click",()=>{const n=r.dataset.teamTab;if(e.forEach(e=>{e.classList.remove("bg-graphite-800","text-white","border-graphite-800"),e.classList.add("border-graphite-100")}),r.classList.add("bg-graphite-800","text-white","border-graphite-800"),r.classList.remove("border-graphite-100"),t.forEach(e=>{e.classList.add("hidden"),e.dataset.teamPanel===n&&(e.classList.remove("hidden"),e.style.opacity="0",requestAnimationFrame(()=>{e.style.transition="opacity 0.5s ease",e.style.opacity="1"}))}),window.innerWidth<768){const e=document.getElementById("team-detail");if(e){const t=document.getElementById("navbar")?.offsetHeight||0;window.scrollTo({top:e.getBoundingClientRect().top+window.scrollY-t-20,behavior:"smooth"})}}})})}function initContactForm(){const e=document.getElementById("contact-form");if(!e)return;const t=e.querySelector('button[type="submit"]'),r=document.getElementById("form-feedback");e.addEventListener("submit",async n=>{n.preventDefault(),clearFieldErrors();const o=Object.fromEntries(new FormData(e).entries());let a=!1;if((!o.nombre||o.nombre.trim().length<2)&&(setFieldError("nombre","El nombre es obligatorio (mínimo 2 caracteres)."),a=!0),o.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(setFieldError("email","Por favor ingresá un email válido."),a=!0):(setFieldError("email","El email es obligatorio."),a=!0),(!o.telefono||o.telefono.trim().length<8)&&(setFieldError("telefono","El celular es obligatorio (mínimo 8 dígitos)."),a=!0),(!o.mensaje||o.mensaje.trim().length<10)&&(setFieldError("mensaje","El mensaje es obligatorio (mínimo 10 caracteres)."),a=!0),!a){t.disabled=!0,t.textContent="Enviando...";try{if(!(await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw new Error("Server error");showFeedback(r,"Mensaje enviado. Nos pondremos en contacto pronto.","success"),e.reset()}catch(e){console.error("Contact form error:",e),showFeedback(r,"Error al enviar. Por favor intentá nuevamente o escribinos a info@synapsishealth.com.ar","error")}finally{t.disabled=!1,t.textContent="Enviar mensaje"}}})}function setFieldError(e,t){const r=document.getElementById(e),n=document.getElementById(e+"-error");r&&r.setAttribute("aria-invalid","true"),n&&(n.textContent=t)}function clearFieldErrors(){document.querySelectorAll("[aria-invalid]").forEach(e=>e.removeAttribute("aria-invalid")),document.querySelectorAll(".error-message").forEach(e=>e.textContent="")}function showFeedback(e,t,r){e&&(e.textContent=t,e.className="success"===r?"mt-4 text-sm text-green-700 bg-green-50 border border-green-200 rounded-lg px-4 py-3":"mt-4 text-sm text-red-700 bg-red-50 border border-red-200 rounded-lg px-4 py-3",e.classList.remove("hidden"),setTimeout(()=>e.classList.add("hidden"),8e3))}document.addEventListener("DOMContentLoaded",()=>{initMobileMenu(),initScrollReveal(),initNavbarScroll(),initSmoothScroll(),initServiceTabs(),initTeamTabs(),initContactForm()});